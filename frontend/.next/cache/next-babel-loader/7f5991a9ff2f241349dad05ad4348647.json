{"ast":null,"code":"var _jsxFileName = \"/home/rlsxsuredials/Downloads/Test/CCosmetic-master/frontend/src/pages/shop/fullwidth-4col.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from \"react\";\nimport Paginator from \"react-hooks-paginator\";\nimport { getProductBySort } from \"../../common/productSelect\";\nimport { Breadcrumb, BreadcrumbItem } from \"../../components/Other/Breadcrumb\";\nimport LayoutFour from \"../../components/Layout/LayoutFour\";\nimport ShopProducts from \"../../components/Shop/ShopProducts\";\nimport ShopHeader from \"../../components/Shop/ShopHeader\";\nimport InstagramTwo from \"../../components/Sections/Instagram/InstagramTwo\";\nexport default function ShopFullwidth() {\n  const pageLimit = 12;\n  const {\n    0: offset,\n    1: setOffset\n  } = useState(0);\n  const {\n    0: currentView,\n    1: setCurrentView\n  } = useState();\n  const {\n    0: currentSort,\n    1: setCurrentSort\n  } = useState();\n  const {\n    0: currentPage,\n    1: setCurrentPage\n  } = useState(1);\n  const {\n    0: currentData,\n    1: setCurrentData\n  } = useState([]);\n  const {\n    0: totalRecords,\n    1: setTotalRecords\n  } = useState(0);\n  const {\n    0: categories,\n    1: setCategories\n  } = useState({}); // Estado para las categorías\n\n  async function fetchCategories() {\n    try {\n      const response = await fetch('http://localhost:8090/api/collections/categories/records');\n      const data = await response.json();\n      const categoriesMap = {};\n      data.items.forEach(category => {\n        categoriesMap[category.id] = category.categorieName;\n      });\n      setCategories(categoriesMap);\n      fetchProductData(categoriesMap);\n    } catch (error) {\n      console.error('Error fetching categories data:', error);\n    }\n  }\n  async function fetchProductData(categoriesMap) {\n    try {\n      const response = await fetch('http://localhost:8090/api/collections/products/records');\n      const data = await response.json();\n      setTotalRecords(data.totalItems);\n      let formattedData = data.items.map(item => {\n        const thumbImageUrl = item.thumbImage_270x345 ? `http://localhost:8090/api/files/${item.collectionId}/${item.id}/${item.thumbImage_270x345}` : undefined;\n        const imagesArray = item.image_270x345 && Array.isArray(item.image_270x345) ? item.image_270x345.map(img => `http://localhost:8090/api/files/${item.collectionId}/${item.id}/${img}`) : [];\n        return {\n          id: item.id,\n          category: item.categorieName.map(categoryId => categoriesMap[categoryId]).filter(Boolean),\n          name: item.name,\n          rate: item.rate,\n          price: item.price,\n          new: item.new,\n          brand: item.brand,\n          code: item.code,\n          point: item.point,\n          quantity: item.quantity,\n          colorVariations: [\n            // ... tu lógica para las variaciones de color\n          ],\n          thumbImage: thumbImageUrl,\n          images: imagesArray,\n          description: item.description,\n          slug: item.slug\n        };\n      });\n      let sortedProduct = getProductBySort(formattedData, currentSort);\n      setCurrentData(sortedProduct.slice(offset, offset + pageLimit));\n    } catch (error) {\n      console.error('Error fetching product data:', error);\n    }\n  }\n  useEffect(() => {\n    fetchCategories();\n    // Dependencias para useEffect\n  }, [offset, currentSort]);\n  return __jsx(LayoutFour, {\n    title: \"TIENDA\",\n    container: \"wide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, __jsx(Breadcrumb, {\n    title: \"TIENDA\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, __jsx(BreadcrumbItem, {\n    name: \"INICIO\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }), __jsx(BreadcrumbItem, {\n    name: \"TIENDA\",\n    current: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    className: \"shop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"container-full-half\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, __jsx(ShopHeader, {\n    view: currentView,\n    getCurrentSort: setCurrentSort,\n    getCurrentView: view => setCurrentView(view),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }), __jsx(ShopProducts, {\n    gridColClass: \"col-12 col-sm-6 col-md-4 col-lg-3\",\n    listColClass: \"col-12 col-lg-6\",\n    view: currentView,\n    data: currentData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }), __jsx(Paginator, {\n    pageContainerClass: \"paginator\",\n    totalRecords: totalRecords,\n    pageLimit: pageLimit,\n    pageNeighbours: 2,\n    setOffset: setOffset,\n    currentPage: currentPage,\n    setCurrentPage: setCurrentPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"names":["useState","useEffect","Paginator","getProductBySort","Breadcrumb","BreadcrumbItem","LayoutFour","ShopProducts","ShopHeader","InstagramTwo","ShopFullwidth","pageLimit","offset","setOffset","currentView","setCurrentView","currentSort","setCurrentSort","currentPage","setCurrentPage","currentData","setCurrentData","totalRecords","setTotalRecords","categories","setCategories","fetchCategories","response","fetch","data","json","categoriesMap","items","forEach","category","id","categorieName","fetchProductData","error","console","totalItems","formattedData","map","item","thumbImageUrl","thumbImage_270x345","collectionId","undefined","imagesArray","image_270x345","Array","isArray","img","categoryId","filter","Boolean","name","rate","price","new","brand","code","point","quantity","colorVariations","thumbImage","images","description","slug","sortedProduct","slice","__jsx","title","container","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","current","className","view","getCurrentSort","getCurrentView","gridColClass","listColClass","pageContainerClass","pageNeighbours"],"sources":["/home/rlsxsuredials/Downloads/Test/CCosmetic-master/frontend/src/pages/shop/fullwidth-4col.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Paginator from \"react-hooks-paginator\";\r\nimport { getProductBySort } from \"../../common/productSelect\";\r\nimport { Breadcrumb, BreadcrumbItem } from \"../../components/Other/Breadcrumb\";\r\nimport LayoutFour from \"../../components/Layout/LayoutFour\";\r\nimport ShopProducts from \"../../components/Shop/ShopProducts\";\r\nimport ShopHeader from \"../../components/Shop/ShopHeader\";\r\nimport InstagramTwo from \"../../components/Sections/Instagram/InstagramTwo\";\r\n\r\nexport default function ShopFullwidth() {\r\n  const pageLimit = 12;\r\n  const [offset, setOffset] = useState(0);\r\n  const [currentView, setCurrentView] = useState();\r\n  const [currentSort, setCurrentSort] = useState();\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [currentData, setCurrentData] = useState([]);\r\n  const [totalRecords, setTotalRecords] = useState(0);\r\n  const [categories, setCategories] = useState({}); // Estado para las categorías\r\n\r\n  async function fetchCategories() {\r\n    try {\r\n      const response = await fetch('http://localhost:8090/api/collections/categories/records');\r\n      const data = await response.json();\r\n      const categoriesMap = {};\r\n      data.items.forEach((category) => {\r\n        categoriesMap[category.id] = category.categorieName;\r\n      });\r\n      setCategories(categoriesMap);\r\n      fetchProductData(categoriesMap); \r\n    } catch (error) {\r\n      console.error('Error fetching categories data:', error);\r\n    }\r\n  }\r\n\r\n  async function fetchProductData(categoriesMap) {\r\n    try {\r\n      const response = await fetch('http://localhost:8090/api/collections/products/records');\r\n      const data = await response.json();\r\n      setTotalRecords(data.totalItems);\r\n      let formattedData = data.items.map(item => {\r\n        const thumbImageUrl = item.thumbImage_270x345 ? \r\n          `http://localhost:8090/api/files/${item.collectionId}/${item.id}/${item.thumbImage_270x345}` : \r\n          undefined;\r\n        const imagesArray = item.image_270x345 && Array.isArray(item.image_270x345) ? \r\n          item.image_270x345.map(img => \r\n            `http://localhost:8090/api/files/${item.collectionId}/${item.id}/${img}`\r\n          ) : [];\r\n\r\n        return {\r\n          id: item.id,\r\n          category: item.categorieName.map((categoryId) => categoriesMap[categoryId]).filter(Boolean),\r\n          name: item.name,\r\n          rate: item.rate,\r\n          price: item.price,\r\n          new: item.new,\r\n          brand: item.brand,\r\n          code: item.code,\r\n          point: item.point,\r\n          quantity: item.quantity,\r\n          colorVariations: [\r\n            // ... tu lógica para las variaciones de color\r\n          ],\r\n          thumbImage: thumbImageUrl,\r\n          images: imagesArray,\r\n          description: item.description,\r\n          slug: item.slug\r\n        };\r\n      });\r\n      let sortedProduct = getProductBySort(formattedData, currentSort);\r\n      setCurrentData(sortedProduct.slice(offset, offset + pageLimit));\r\n    } catch (error) {\r\n      console.error('Error fetching product data:', error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchCategories();\r\n    // Dependencias para useEffect\r\n  }, [offset, currentSort]);\r\n  \r\n  return (\r\n    <LayoutFour title=\"TIENDA\" container=\"wide\">\r\n      <Breadcrumb title=\"TIENDA\">\r\n        <BreadcrumbItem name=\"INICIO\" />\r\n        <BreadcrumbItem name=\"TIENDA\" current />\r\n      </Breadcrumb>\r\n      <div className=\"shop\">\r\n        <div className=\"container-full-half\">\r\n          <ShopHeader\r\n            view={currentView}\r\n            getCurrentSort={setCurrentSort}\r\n            getCurrentView={(view) => setCurrentView(view)}\r\n          />\r\n          <ShopProducts\r\n            gridColClass=\"col-12 col-sm-6 col-md-4 col-lg-3\"\r\n            listColClass=\"col-12 col-lg-6\"\r\n            view={currentView}\r\n            data={currentData}\r\n          />\r\n          <Paginator\r\n            pageContainerClass=\"paginator\"\r\n            totalRecords={totalRecords}\r\n            pageLimit={pageLimit}\r\n            pageNeighbours={2}\r\n            setOffset={setOffset}\r\n            currentPage={currentPage}\r\n            setCurrentPage={setCurrentPage}\r\n          />\r\n        </div>\r\n      </div>\r\n    </LayoutFour>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}