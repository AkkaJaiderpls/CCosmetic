{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Link from \"next/link\";\nimport { useSelector } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport LayoutFour from \"../../components/Layout/LayoutFour\";\nimport { Breadcrumb, BreadcrumbItem } from \"../../components/Other/Breadcrumb\";\nimport InstagramTwo from \"../../components/Sections/Instagram/InstagramTwo\";\nimport { formatCurrency } from \"../../common/utils\";\nimport { calculateTotalPrice } from \"../../common/shopUtils\";\nexport default function Checkout() {\n  const cartState = useSelector(state => state.cartReducer);\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const onSubmit = async formData => {\n    try {\n      const payload = {\n        email: formData.contact,\n        name: formData.firstName,\n        lastName: formData.lastName,\n        address: formData.streetAddress,\n        dptoNumber: formData.apartment,\n        city: formData.town,\n        state: formData.state,\n        country: formData.country,\n        zipCode: formData.zip,\n        phone: formData.contact,\n        total: calculateTotalPrice(cartState, false),\n        apartment: formData.apartment,\n        products: JSON.stringify(cartState.map(item => ({\n          id: item.cartId,\n          name: item.name,\n          quantity: item.cartQuantity,\n          price: item.price\n        })))\n      };\n      const response = await fetch('http://localhost:8090/api/collections/sales/records', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        throw new Error('Error al enviar los datos de venta');\n      }\n      window.location.reload();\n    } catch (error) {\n      console.error('Error en el envÃ­o:', error);\n    }\n  };\n  return __jsx(LayoutFour, {\n    title: \"Checkout\"\n  }, __jsx(Breadcrumb, {\n    title: \"COMPRAR\"\n  }, __jsx(BreadcrumbItem, {\n    name: \"INICIO\"\n  }), __jsx(BreadcrumbItem, {\n    name: \"TIENDA\"\n  }), __jsx(BreadcrumbItem, {\n    name: \"COMPRAR\",\n    current: true\n  })), __jsx(\"div\", {\n    className: \"checkout\"\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-12 col-lg-8\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(\"div\", {\n    className: \"checkout__form\"\n  }, __jsx(\"div\", {\n    className: \"checkout__form__contact\"\n  }, __jsx(\"div\", {\n    className: \"checkout__form__contact__title\"\n  }, __jsx(\"h5\", {\n    className: \"checkout-title\"\n  }, \"INFORMACI\\xD3N DE CONTACTO\")), __jsx(\"div\", {\n    className: \"input-validator\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"contact\",\n    ref: register({\n      required: true\n    }),\n    placeholder: \"CORREO O N\\xDAMERO DE TEL\\xC9FONO\"\n  }), errors.contact && __jsx(\"span\", {\n    className: \"input-error\"\n  }, \"Por favor, indica un nombre o correo\")), __jsx(\"label\", {\n    className: \"checkbox-label\",\n    htmlFor: \"subcribe-news\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    id: \"subcribe-news\",\n    name: \"subcribeNews\",\n    ref: register\n  }), \"MANT\\xC9NME AL TANTO DE NUEVAS OFERTAS\")), __jsx(\"div\", {\n    className: \"checkout__form__shipping\"\n  }, __jsx(\"h5\", {\n    className: \"checkout-title\"\n  }, \"DIRECCI\\xD3N DE ENV\\xCDO\"), __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-12 col-md-6\"\n  }, __jsx(\"div\", {\n    className: \"input-validator\"\n  }, __jsx(\"label\", null, \"NOMBRE \", __jsx(\"span\", null, \"*\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"firstName\",\n    ref: register({\n      required: true\n    })\n  })), errors.firstName && __jsx(\"span\", {\n    className: \"input-error\"\n  }, \"Por favor, indica un nombre\"))), __jsx(\"div\", {\n    className: \"col-12 col-md-6\"\n  }, __jsx(\"div\", {\n    className: \"input-validator\"\n  }, __jsx(\"label\", null, \"APELLIDO \", __jsx(\"span\", null, \"*\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"lastName\",\n    ref: register({\n      required: true\n    })\n  })), errors.lastName && __jsx(\"span\", {\n    className: \"input-error\"\n  }, \"Por favor, indica un apellido\"))), __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(\"div\", {\n    className: \"input-validator\"\n  }, __jsx(\"label\", null, \"PA\\xCDS \", __jsx(\"span\", null, \"*\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"country\",\n    ref: register({\n      required: true\n    })\n  })), errors.country && __jsx(\"span\", {\n    className: \"input-error\"\n  }, \"Por favor, indica un pa\\xEDs\"))), __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(\"div\", {\n    className: \"input-validator\"\n  }, __jsx(\"label\", null, \"DIRECCI\\xD3N \", __jsx(\"span\", null, \"*\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"streetAddress\",\n    ref: register({\n      required: true\n    }),\n    placeholder: \"DIRECCI\\xD3N\"\n  }), __jsx(\"input\", {\n    type: \"text\",\n    name: \"apartment\",\n    ref: register({\n      required: true\n    }),\n    placeholder: \"N\\xDAMERO DE DEPARTAMENTO (OPCIONAL)\"\n  })), errors.streetAddress || errors.apartment ? __jsx(\"span\", {\n    className: \"input-error\"\n  }, \"Por favor, indica una direcci\\xF3n\") : null)), __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(\"div\", {\n    className: \"input-validator\"\n  }, __jsx(\"label\", null, \"CIUDAD \", __jsx(\"span\", null, \"*\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"town\",\n    ref: register({\n      required: true\n    })\n  })), errors.town && __jsx(\"span\", {\n    className: \"input-error\"\n  }, \"Por favor, indica una ciudad\"))), __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(\"div\", {\n    className: \"input-validator\"\n  }, __jsx(\"label\", null, \"DEPARTAMENTEO \", __jsx(\"span\", null, \"*\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"state\",\n    ref: register({\n      required: true\n    })\n  })), errors.state && __jsx(\"span\", {\n    className: \"input-error\"\n  }, \"Por favor, indica un departamento\"))), __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(\"div\", {\n    className: \"input-validator\"\n  }, __jsx(\"label\", null, \"C\\xD3DIGO POSTAL \", __jsx(\"span\", null, \"*\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"zip\",\n    ref: register({\n      required: true\n    })\n  })), errors.zip && __jsx(\"span\", {\n    className: \"input-error\"\n  }, \"Por favor, indica un c\\xF3digo postal\"))), __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(\"div\", {\n    className: \"input-validator\"\n  }, __jsx(\"label\", null, \"INDICACIONES\", __jsx(\"input\", {\n    type: \"text\",\n    name: \"note\",\n    placeholder: \"INDICACIONES PARA EL PEDIDO\",\n    ref: register()\n  }))))), __jsx(\"label\", {\n    className: \"checkbox-label\",\n    htmlFor: \"save\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    id: \"save\",\n    name: \"saveInfo\",\n    ref: register()\n  }), \"GUARDAR ESTA INFORMACI\\xD3N PARA LA PR\\xD3XIMA VEZ\"))))), __jsx(\"div\", {\n    className: \"col-12 col-lg-4\"\n  }, __jsx(\"form\", {\n    className: \"checkout__total__coupon\"\n  }, __jsx(\"h5\", null, \"C\\xD3DIGO DE CUP\\xD3N\"), __jsx(\"div\", {\n    className: \"input-validator\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"C\\xD3DIGO DE CUP\\xD3N\",\n    name: \"coupon\"\n  })), __jsx(\"button\", {\n    className: \"btn -dark\"\n  }, \"APLICAR\")), __jsx(\"div\", {\n    className: \"checkout__total__price\"\n  }, __jsx(\"h5\", null, \"PRODUCTO\"), __jsx(\"table\", null, __jsx(\"colgroup\", null, __jsx(\"col\", {\n    style: {\n      width: \"70%\"\n    }\n  }), __jsx(\"col\", {\n    style: {\n      width: \"30%\"\n    }\n  })), __jsx(\"tbody\", null, cartState.map(item => __jsx(\"tr\", {\n    key: item.cartId\n  }, __jsx(\"td\", null, __jsx(\"span\", null, item.cartQuantity), \" \", \"x \", item.name), __jsx(\"td\", null, formatCurrency(item.price * item.cartQuantity)))))), __jsx(\"div\", {\n    className: \"checkout__total__price__total-count\"\n  }, __jsx(\"table\", null, __jsx(\"tbody\", null, __jsx(\"tr\", null, __jsx(\"td\", null, \"SUBTOTAL\"), __jsx(\"td\", null, calculateTotalPrice(cartState, true))), __jsx(\"tr\", null, __jsx(\"td\", null, \"TOTAL\"), __jsx(\"td\", null, calculateTotalPrice(cartState, true))))))), __jsx(\"button\", {\n    className: \"btn -red\",\n    onClick: handleSubmit(onSubmit)\n  }, \"COMPRAR\"))))), __jsx(InstagramTwo, null));\n}","map":null,"metadata":{},"sourceType":"module"}